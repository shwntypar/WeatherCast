<div class="flex flex-col space-y-1 bg-slate-300 h-screen w-screen items-center justify-center">

  <!-- div for search bar and settings -->
  <div class="flex flex-row items-center w-screen justify-center">
    <form [formGroup]="searchForm" class="flex items-center w-1/3" >   
      <label for="simple-search" class="sr-only">Search</label>
      <div class="relative w-full">
          <input type="text" formControlName="city" id="simple-search" class="shadow-md bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:outline-0 block w-full p-2.5" placeholder="Search for a Location" required />
      </div>
      <button type="submit" (click)="searchByCity()"  class="p-2.5 ms-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800">
          <svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
          </svg>
          <span class="sr-only">Search</span>
      </button>
    </form>

    <!-- SETTINGS BUTTON -->
     <div>
      <button id="dropdownDefaultButton" data-dropdown-toggle="dropdown" class="p-2 ms-2 text-sm font-medium text-white bg-gray-500 rounded-lg border border-gray-600 hover:bg-gray-600" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
      </button>

      <!-- Dropdown menu -->
     </div>

     <div id="dropdown" class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44">
      <div>
        <ul class="py-2 text-sm text-gray-700" aria-labelledby="dropdownDefaultButton">
          <li  class="block px-4 py-2 text-xs">
            Measure Temperature By:
          </li>
          <li>
            <a (click)="ChangeMeasurement('&units=standard')" class="block px-4 py-2 hover:bg-gray-100">Kelvin</a>
          </li>
          <li>
            <a (click)="ChangeMeasurement('&units=metric')"  class="block px-4 py-2 hover:bg-gray-100">Celsius</a>
          </li>
          <li>
            <a (click)="ChangeMeasurement('&units=imperial')" class="block px-4 py-2 hover:bg-gray-100 ">Fahrenheit</a>
          </li>
          <hr>
          <li>
            <a class="block px-4 py-2 hover:bg-gray-100" (click)="ChangeView()">
              <h1 *ngIf="AdvancedView">
                Advanced View
              </h1>
              <h1 *ngIf="!AdvancedView">
                Default View
              </h1>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  

  
  <div *ngIf="loading" class=" flex flex-row justify-center items-center p-5 w-[65%] h-[70%]" >
    <div class="dot-spinner">
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
      <div class="dot-spinner__dot"></div>
  </div>
  </div>

  <div *ngIf="!loading && AdvancedView"  class="flex flex-row justify-center p-5 w-[65%] h-[70%] space-x-2">
    
    <div class="shadow-md flex flex-row w-auto items-center justify-between py-4 px-6 h-[60%] bg-purple-300 rounded-xl">

      <div class="justify-between">
        <div class="px-4 py-1 flex flex-col"> 
          <div class="flex flex-row"> 
            <h1 class="text-5xl font-sans font-extrabold antialiased">
              {{weatherData?.name}}
              <svg class="color inline -mt-2" stroke="black" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 24 24">
                <path fill-rule="evenodd" d="M11.906 1.994a8.002 8.002 0 0 1 8.09 8.421 7.996 7.996 0 0 1-1.297 3.957.996.996 0 0 1-.133.204l-.108.129c-.178.243-.37.477-.573.699l-5.112 6.224a1 1 0 0 1-1.545 0L5.982 15.26l-.002-.002a18.146 18.146 0 0 1-.309-.38l-.133-.163a.999.999 0 0 1-.13-.202 7.995 7.995 0 0 1 6.498-12.518ZM15 9.997a3 3 0 1 1-5.999 0 3 3 0 0 1 5.999 0Z" clip-rule="evenodd"/>
              </svg>
            </h1>
          </div>
          <p class="font-bold">{{weatherData?.sys.country}}</p>
        </div>
        <div class="px-4 py-1 flex flex-col">
          <h1 class="text-5xl font-sans font-extrabold antialiased">
            {{weatherData.main.temp}}°{{MetricSymbol}}
          </h1>
          <p class="font-bold">Temperature</p>
        </div>
      </div>

        <div class="p-4 flex flex-col items-center justify-center">
          <h1 class="text-xl font-bold" >{{weatherData?.weather[0].main}}</h1>
          <img [src]="'https://openweathermap.org/img/wn/' + weatherData.weather[0].icon + '@2x.png'">
          <p class="text-sm font-semibold">{{weatherData?.weather[0].description}}</p>
        </div>

    </div>

    

    <!-- <div class="flex flex-row h-[50%] w-full space-x-2">
      <div class="shadow-md flex flex-col items-center justify-center w-1/3 h-full bg-purple-300 rounded-xl">
        <h1 class="text-lg font-bold" >{{weatherData?.weather[0].main}}</h1>
        <img [src]="'https://openweathermap.org/img/wn/' + weatherData.weather[0].icon + '@2x.png'">
        <p class="font-semibold">{{weatherData?.weather[0].description}}</p>
      </div>
      <div class="shadow-md flex flex-col justify-center items-center w-1/3 h-full bg-purple-300 rounded-xl"> 
        
        <div class="flex">
          <h1 class="text-lg font-bold" >Humidity</h1>
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-droplets ml-1 mt-0.5"><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"/><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"/></svg>
        </div>
        <div class="flex mb-4 p-4">
          <h1 class="text-5xl font-sans font-extrabold antialiased">
            {{weatherData.main.humidity}}
          </h1>
          <p class="text-xl font-extrabold">%</p>
        </div>
      </div>
      <div class="shadow-md flex flex-col justify-center items-center w-1/3 h-full bg-purple-300 rounded-xl">
        <div class="flex">
          <h1 class="text-lg font-bold">
            Cloud Cover
          </h1>  
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud ml-1 mt-0.5"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/></svg>
        </div>
        <div class="flex mb-4 p-4">
          <h1 class="text-5xl font-sans font-extrabold antialiased">
            {{weatherData.clouds.all}}
          </h1>
          <p class="text-xl font-extrabold">%</p>
        </div>
      </div>
    </div> -->  
    
  </div>

  <!-- Advanced View -->
  <div class=" p-5 w-[50%] h-[70%] space-y-2" *ngIf="!loading && !AdvancedView">
    <div class="shadow-md flex flex-row w-full justify-between gap-4 items-center py-4 px-6 h-[45%] bg-purple-300 rounded-xl">

      <div class="p-4 flex flex-col"> 
        <div class="flex flex-row"> 
          <h1 class="text-5xl font-sans font-extrabold antialiased">
            {{weatherData?.name}}
            <svg class="color inline -mt-2" stroke="black" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" viewBox="0 0 24 24">
              <path fill-rule="evenodd" d="M11.906 1.994a8.002 8.002 0 0 1 8.09 8.421 7.996 7.996 0 0 1-1.297 3.957.996.996 0 0 1-.133.204l-.108.129c-.178.243-.37.477-.573.699l-5.112 6.224a1 1 0 0 1-1.545 0L5.982 15.26l-.002-.002a18.146 18.146 0 0 1-.309-.38l-.133-.163a.999.999 0 0 1-.13-.202 7.995 7.995 0 0 1 6.498-12.518ZM15 9.997a3 3 0 1 1-5.999 0 3 3 0 0 1 5.999 0Z" clip-rule="evenodd"/>
            </svg>
          </h1>
        </div>
        <p class="font-bold">{{weatherData?.sys.country}}</p>
      </div>
      <div class="p-4 flex flex-col">
        <h1 class="text-5xl font-sans font-extrabold antialiased">
          {{weatherData.main.temp}}°{{MetricSymbol}}
        </h1>
        <div class="flex text-sm flex-row justify-end space-x-2">
          <p class="font-bold text-end">min:{{weatherData.main.temp_min}}</p>
          <p class="font-bold text-end">max:{{weatherData.main.temp_max}}</p>
        </div>
        <p class="font-bold text-end">Temperature</p>
      </div>

    </div>

    <div class="flex flex-row h-[50%] w-full space-x-2">
      <div class="shadow-md flex flex-col items-center justify-center w-1/3 h-full bg-purple-300 rounded-xl">
        <h1 class="text-lg font-bold" >{{weatherData?.weather[0].main}}</h1>
        <img [src]="'https://openweathermap.org/img/wn/' + weatherData.weather[0].icon + '@2x.png'">
        <p class="font-semibold">{{weatherData?.weather[0].description}}</p>
      </div>
      <div class="shadow-md flex flex-col justify-center items-center w-1/3 h-full bg-purple-300 rounded-xl"> 
        
        <div class="flex">
          <h1 class="text-lg font-bold" >Humidity</h1>
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-droplets ml-1 mt-0.5"><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"/><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"/></svg>
        </div>
        <div class="flex mb-4 p-4">
          <h1 class="text-5xl font-sans font-extrabold antialiased">
            {{weatherData.main.humidity}}
          </h1>
          <p class="text-xl font-extrabold">%</p>
        </div>
      </div>
      <div class="shadow-md flex flex-col justify-center items-center w-1/3 h-full bg-purple-300 rounded-xl">
        <div class="flex">
          <h1 class="text-lg font-bold">
            Cloud Cover
          </h1>  
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud ml-1 mt-0.5"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/></svg>
        </div>
        <div class="flex mb-4 p-4">
          <h1 class="text-5xl font-sans font-extrabold antialiased">
            {{weatherData.clouds.all}}
          </h1>
          <p class="text-xl font-extrabold">%</p>
        </div>
      </div>
    </div>  
  </div>

</div>
